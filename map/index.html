<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='utf-8' />
  <title>Map of CSUN</title>
  <meta name='viewport' content='width=device-width, initial-scale=1' />
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v3.1.0/mapbox-gl.js'></script>
  <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.2.min.js"></script>
  <script type="text/javascript">
	Bokeh.set_log_level("info");
  </script>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v3.1.0/mapbox-gl.css' rel='stylesheet' />
  <style>
    body {
      margin: 0;
      padding: 0;
    }

    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 100%;
    }
	
	.building-info {
	position: absolute;
	font-family: sans-serif;
	margin-top: 5px;
	margin-left: 5px;
	padding: 5px;
	width: 30%;
	border: 2px solid black;
	font-size: 14px;
	color: #222;
	background-color: #fff;
	border-radius: 3px;
}

  </style>
</head>
<body>

  <div id='map'></div>
  
  <div class='building-info'>
  <div><strong>ID:</strong> <span id='id'></span></div>
  <div><strong>Name:</strong> <span id='name'></span></div>
  </div>

  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoieGVsYXBob24iLCJhIjoiY2xyd3JhZmd5MTZlMzJqcnphZ2hram0xdCJ9.qpnL5_UBg6JGdBDKvCMAWQ';
    const map = new mapboxgl.Map({
      container: 'map', // Specify the container ID
      style: 'mapbox://styles/mapbox/outdoors-v12', // Specify which map style to use
      center: [-118.528554, 34.240028], // Specify the starting position [lng, lat]
      zoom: 15.63 // Specify the starting zoom
    });
	
	const idDisplay = document.getElementById('id');
	const nameDisplay = document.getElementById('name');
	
	const building_color = '#D45C54';
	
	/*const buildingInfo = {
	"2122586":{"name":"Jacaranda Hall"},"6427393":{"name":"Parking Structure B3"},"6427394":{"name":"Cypress Hall"},"6427395":{"name":"Education"},"6427396":{"name":"Jeanne Chisholm Hall"},"6427397":{"name":"other"},"6427398":{"name":"University Library"},"6427399":{"name":"University Student Union"},"6427400":{"name":"other"},"6655319":{"name":"other"},"6655322":{"name":"other"},"6655323":{"name":"other"},"6655331":{"name":"other"},"6817454":{"name":"other"},"6817455":{"name":"other"},"6817456":{"name":"other"},"6817457":{"name":"University Library"},"6851814":{"name":"Student Recreation Center"},"6852370":{"name":"Citrus Hall"},"6852371":{"name":"Magnolia Hall"},"6852372":{"name":"Eucalyptus Hall"},"6852373":{"name":"Live Oak Hall"},"6852374":{"name":"other"},"6852409":{"name":"Donald Bianchi Planetarium"},"6855295":{"name":"Sierra Hall"},"6855296":{"name":"Sierra Tower"},"6855297":{"name":"Jerome Richfield Hall"},"6855298":{"name":"Sierra Center"},"6855299":{"name":"other"},"6855301":{"name":"Nordhoff Hall"},"6997650":{"name":"other"},"7000783":{"name":"other"},"7000784":{"name":"other"},"7017925":{"name":"Cypress Hall"},"9845873":{"name":"other"},"9848395":{"name":"other"},"158462302":{"name":"Johnson Auditorium"},"158464581":{"name":"Chaparral Hall"},"158612444":{"name":"other"},"158612446":{"name":"other"},"432157457":{"name":"Addie Klotz Student Health Center"},"432157458":{"name":"Art and Design Center"},"432157459":{"name":"Art and Design Center"},"432157462":{"name":"Art and Design Center"},"432157466":{"name":"Art and Design Center"},"432157468":{"name":"Art and Design Center"},"432157469":{"name":"Art and Design Center"},"432157470":{"name":"Art and Design Center"},"432157471":{"name":"Auto Shop"},"432157472":{"name":"Parking Structure B5"},"432157477":{"name":"other"},"432157498":{"name":"Bayramian Hall"},"432157508":{"name":"other"},"432157518":{"name":"Campus Store Complex"},"432157528":{"name":"other"},"432157538":{"name":"University Village Apartments"},"432157542":{"name":"other"},"432157545":{"name":"Post Office"},"432157546":{"name":"other"},"432157547":{"name":"Physical Plant Management"},"432157548":{"name":"Central Plant"},"432157549":{"name":"other"},"432157550":{"name":"other"},"432157551":{"name":"other"},"432157552":{"name":"other"},"432157553":{"name":"other"},"432157554":{"name":"Education Administration"},"432157555":{"name":"other"},"432157556":{"name":"Student Development"},"432157559":{"name":"other"},"432157564":{"name":"other"},"432157568":{"name":"other"},"432157569":{"name":"Intercollegiate Athletics Office"},"432157570":{"name":"Bookstein Hall"},"432157572":{"name":"other"},"432157576":{"name":"other"},"432157579":{"name":"other"},"432157580":{"name":"other"},"432157581":{"name":"Manzanita Hall"},"432157582":{"name":"other"},"432157583":{"name":"other"},"432157585":{"name":"other"},"432157587":{"name":"Parking Structure G3"},"432157588":{"name":"Physical Plant Management"},"432157589":{"name":"other"},"432157590":{"name":"Police Services"},"432157591":{"name":"other"},"432157592":{"name":"Oasis Wellness Center"},"432157593":{"name":"Redwood Hall"},"432157594":{"name":"other"},"432157596":{"name":"other"},"432157597":{"name":"other"},"432157598":{"name":"Santa Susana Hall"},"432157599":{"name":"Satellite Central Plant"},"432157600":{"name":"other"},"432157601":{"name":"Sequoia Hall"},"432157602":{"name":"other"},"432157603":{"name":"other"},"432157605":{"name":"other"},"432157607":{"name":"other"},"432157608":{"name":"Physical Plant Management"},"432157609":{"name":"Valera Hall"},"432157610":{"name":"University Student Union"},"432157611":{"name":"other"},"432157612":{"name":"The Soraya"},"432157613":{"name":"other"},"432157614":{"name":"other"},"432157615":{"name":"other"},"432157616":{"name":"other"},"432157617":{"name":"other"},"432157618":{"name":"Art and Design Center"},"432157619":{"name":"other"},"432157620":{"name":"other"},"432157622":{"name":"other"},"432157624":{"name":"University Village Apartments"},"432157625":{"name":"University Village Apartments"},"432157626":{"name":"University Village Apartments"},"432157628":{"name":"other"},"432157629":{"name":"other"},"432157630":{"name":"other"},"432157631":{"name":"other"},"432157632":{"name":"University Village Apartments"},"432157633":{"name":"other"},"432157635":{"name":"other"},"432157637":{"name":"other"},"432157655":{"name":"other"},"432157658":{"name":"other"},"432157664":{"name":"other"},"432157666":{"name":"other"},"432157669":{"name":"other"},"432157673":{"name":"other"},"432157679":{"name":"other"},"432157685":{"name":"other"},"432157688":{"name":"other"},"432157694":{"name":"other"},"432157700":{"name":"other"},"432157703":{"name":"other"},"432157706":{"name":"other"},"432157710":{"name":"other"},"432157711":{"name":"other"},"432157712":{"name":"other"},"432157713":{"name":"other"},"432157716":{"name":"other"},"432157718":{"name":"other"},"432157719":{"name":"other"},"432157721":{"name":"other"},"432157722":{"name":"other"},"432157723":{"name":"other"},"432157725":{"name":"other"},"432157727":{"name":"other"},"432157728":{"name":"other"},"432157729":{"name":"Aquatic Center"},"432157730":{"name":"other"},"432157731":{"name":"other"},"432157732":{"name":"other"},"432157734":{"name":"other"},"432157735":{"name":"other"},"432157737":{"name":"other"},"432157742":{"name":"other"},"432157743":{"name":"other"},"432157744":{"name":"other"},"432157745":{"name":"other"},"432157746":{"name":"other"},"432157747":{"name":"other"},"432157748":{"name":"other"},"432157750":{"name":"other"},"432157752":{"name":"other"},"432157755":{"name":"other"},"432157757":{"name":"other"},"432157761":{"name":"other"},"432157762":{"name":"other"},"432157765":{"name":"Physical Plant Management"},"432157766":{"name":"Arbor Grill"},"432157767":{"name":"other"},"432157768":{"name":"University Village Apartments"},"432157769":{"name":"University Village Apartments"},"432157770":{"name":"other"},"432157771":{"name":"other"},"432157772":{"name":"University Village Apartments"},"432157773":{"name":"University Village Apartments"},"432157774":{"name":"University Village Apartments"},"432157775":{"name":"University Village Apartments"},"432157776":{"name":"University Village Apartments"},"432157777":{"name":"other"},"432157778":{"name":"other"},"432157779":{"name":"University Village Apartments"},"432157780":{"name":"other"},"433133706":{"name":"other"},"459660655":{"name":"other"},"459660660":{"name":"other"},"477602212":{"name":"other"},"477602213":{"name":"other"},"598227522":{"name":"Extended University Commons"},"639235130":{"name":"Sustainability Center"},"640393835":{"name":"other"},"640434480":{"name":"other"},"707539331":{"name":"other"},"707539332":{"name":"other"},"707539333":{"name":"other"},"708086347":{"name":"Plaza del Sol"},"708086348":{"name":"Plaza del Sol"},"708155006":{"name":"other"},"710440242":{"name":"other"},"848698981":{"name":"Parking Structure G6"},"1020399834":{"name":"other"},"1061834081":{"name":"other"},"1063040775":{"name":"other"},"1063324885":{"name":"other"},"1063359376":{"name":"other"},"1076205533":{"name":"other"},"1158805573":{"name":"Lilac Hall"},"1230443608":{"name":"other"},"188740808209805":{"name":"other"},"5437676688513775":{"name":"other"},"836975304610285":{"name":"other"},"1864549018748865":{"name":"other"},"2909178995110835":{"name":"other"},"1219755422833595":{"name":"other"},"1057288064715525":{"name":"other"},"4616730731156175":{"name":"other"},"65835421621885":{"name":"other"},"1104038384132715":{"name":"other"},"5071279240170905":{"name":"other"},"470653286898265":{"name":"other"},"1646651575136795":{"name":"other"},"2149025813059035":{"name":"other"}};*/
	
	const buildingInfo = 
	{"2122586":{"name":"Jacaranda Hall"},
	"6427393":{"name":"Parking Structure B3"},
	"6427394":{"name":"Cypress Hall"},
	"6427395":{"name":"Education"},
	"6427396":{"name":"other"},
	"6427397":{"name":"other"},
	"6427398":{"name":"University Library"},
	"6427399":{"name":"University Student Union"},
	"6427400":{"name":"other"},
	"6655319":{"name":"other"},
	"6655322":{"name":"other"},
	"6655323":{"name":"other"},
	"6655331":{"name":"other"},
	"6817454":{"name":"other"},
	"6817455":{"name":"other"},
	"6817456":{"name":"other"},
	"6817457":{"name":"University Library"},
	"6851814":{"name":"Student Recreation Center"},
	"6852370":{"name":"Citrus Hall"},
	"6852371":{"name":"Magnolia Hall"},
	"6852372":{"name":"Eucalyptus Hall"},
	"6852373":{"name":"Live Oak Hall"},
	"6852374":{"name":"other"},
	"6852409":{"name":"Donald Bianchi Planetarium"},
	"6855295":{"name":"Sierra Hall"},
	"6855296":{"name":"Sierra Tower"},
	"6855297":{"name":"Jerome Richfield Hall"},
	"6855298":{"name":"Sierra Center"},
	"6855299":{"name":"other"},
	"6855301":{"name":"Nordhoff Hall"},
	"6997650":{"name":"other"},
	"7000783":{"name":"other"},
	"7000784":{"name":"other"},
	"7017925":{"name":"Cypress Hall"},
	"9845873":{"name":"other"},
	"9848395":{"name":"other"},
	"158462302":{"name":"other"},
	"158464581":{"name":"Chaparral Hall"},
	"158612444":{"name":"other"},
	"158612446":{"name":"other"},
	"432157457":{"name":"other"},
	"432157458":{"name":"Art and Design Center"},
	"432157459":{"name":"Art and Design Center"},
	"432157462":{"name":"Art and Design Center"},
	"432157466":{"name":"Art and Design Center"},
	"432157468":{"name":"Art and Design Center"},
	"432157469":{"name":"Art and Design Center"},
	"432157470":{"name":"Art and Design Center"},
	"432157471":{"name":"other"},
	"432157472":{"name":"Parking Structure B5"},"432157477":{"name":"other"},"432157498":{"name":"Bayramian Hall"},"432157508":{"name":"other"},"432157518":{"name":"Campus Store Complex"},"432157528":{"name":"other"},"432157538":{"name":"other"},"432157542":{"name":"other"},"432157545":{"name":"Post Office"},"432157546":{"name":"other"},"432157547":{"name":"Physical Plant Management"},"432157548":{"name":"Central Plant"},"432157549":{"name":"other"},"432157550":{"name":"other"},"432157551":{"name":"other"},"432157552":{"name":"other"},"432157553":{"name":"other"},"432157554":{"name":"other"},"432157555":{"name":"other"},"432157556":{"name":"other"},"432157559":{"name":"other"},"432157564":{"name":"other"},"432157568":{"name":"other"},"432157569":{"name":"other"},"432157570":{"name":"Bookstein Hall"},"432157572":{"name":"other"},"432157576":{"name":"other"},"432157579":{"name":"other"},"432157580":{"name":"other"},"432157581":{"name":"Manzanita Hall"},"432157582":{"name":"other"},"432157583":{"name":"other"},"432157585":{"name":"other"},"432157587":{"name":"Parking Structure G3"},"432157588":{"name":"Physical Plant Management"},"432157589":{"name":"other"},"432157590":{"name":"other"},"432157591":{"name":"other"},"432157592":{"name":"other"},"432157593":{"name":"Redwood Hall"},"432157594":{"name":"other"},"432157596":{"name":"other"},"432157597":{"name":"other"},"432157598":{"name":"Santa Susana Hall"},"432157599":{"name":"Satellite Central Plant"},"432157600":{"name":"other"},"432157601":{"name":"Sequoia Hall"},"432157602":{"name":"other"},"432157603":{"name":"other"},"432157605":{"name":"other"},"432157607":{"name":"other"},"432157608":{"name":"Physical Plant Management"},"432157609":{"name":"Valera Hall"},"432157610":{"name":"University Student Union"},"432157611":{"name":"other"},"432157612":{"name":"The Soraya"},"432157613":{"name":"other"},"432157614":{"name":"other"},"432157615":{"name":"other"},"432157616":{"name":"other"},"432157617":{"name":"other"},"432157618":{"name":"Art and Design Center"},"432157619":{"name":"other"},"432157620":{"name":"other"},"432157622":{"name":"other"},"432157624":{"name":"other"},"432157625":{"name":"other"},"432157626":{"name":"other"},"432157628":{"name":"other"},"432157629":{"name":"other"},"432157630":{"name":"other"},"432157631":{"name":"other"},"432157632":{"name":"other"},"432157633":{"name":"other"},"432157635":{"name":"other"},"432157637":{"name":"other"},"432157655":{"name":"other"},"432157658":{"name":"other"},"432157664":{"name":"other"},"432157666":{"name":"other"},"432157669":{"name":"other"},"432157673":{"name":"other"},"432157679":{"name":"other"},"432157685":{"name":"other"},"432157688":{"name":"other"},"432157694":{"name":"other"},"432157700":{"name":"other"},"432157703":{"name":"other"},"432157706":{"name":"other"},"432157710":{"name":"other"},"432157711":{"name":"other"},"432157712":{"name":"other"},"432157713":{"name":"other"},"432157716":{"name":"other"},"432157718":{"name":"other"},"432157719":{"name":"other"},"432157721":{"name":"other"},"432157722":{"name":"other"},"432157723":{"name":"other"},"432157725":{"name":"other"},"432157727":{"name":"other"},"432157728":{"name":"other"},"432157729":{"name":"Aquatic Center"},"432157730":{"name":"other"},"432157731":{"name":"other"},"432157732":{"name":"other"},"432157734":{"name":"other"},"432157735":{"name":"other"},"432157737":{"name":"other"},"432157742":{"name":"other"},"432157743":{"name":"other"},"432157744":{"name":"other"},"432157745":{"name":"other"},"432157746":{"name":"other"},"432157747":{"name":"other"},"432157748":{"name":"other"},"432157750":{"name":"other"},"432157752":{"name":"other"},"432157755":{"name":"other"},"432157757":{"name":"other"},"432157761":{"name":"other"},"432157762":{"name":"other"},"432157765":{"name":"Physical Plant Management"},"432157766":{"name":"Arbor Grill"},"432157767":{"name":"other"},"432157768":{"name":"other"},"432157769":{"name":"other"},"432157770":{"name":"other"},"432157771":{"name":"other"},"432157772":{"name":"other"},"432157773":{"name":"other"},"432157774":{"name":"other"},"432157775":{"name":"other"},"432157776":{"name":"other"},"432157777":{"name":"other"},"432157778":{"name":"other"},"432157779":{"name":"other"},"432157780":{"name":"other"},"433133706":{"name":"other"},"459660655":{"name":"other"},"459660660":{"name":"other"},"477602212":{"name":"other"},"477602213":{"name":"other"},"598227522":{"name":"other"},"639235130":{"name":"Sustainability Center"},"640393835":{"name":"other"},"640434480":{"name":"other"},"707539331":{"name":"other"},"707539332":{"name":"other"},"707539333":{"name":"other"},"708086347":{"name":"other"},"708086348":{"name":"Plaza del Sol"},"708155006":{"name":"other"},"710440242":{"name":"other"},"848698981":{"name":"Parking Structure G6"},"1020399834":{"name":"other"},"1061834081":{"name":"other"},"1063040775":{"name":"other"},"1063324885":{"name":"other"},"1063359376":{"name":"other"},"1076205533":{"name":"other"},"1158805573":{"name":"Lilac Hall"},"1230443608":{"name":"other"},"188740808209805":{"name":"other"},"5437676688513775":{"name":"other"},"836975304610285":{"name":"other"},"1864549018748865":{"name":"other"},"2909178995110835":{"name":"other"},"1219755422833595":{"name":"other"},"1057288064715525":{"name":"other"},"4616730731156175":{"name":"other"},"65835421621885":{"name":"other"},"1104038384132715":{"name":"other"},"5071279240170905":{"name":"other"},"470653286898265":{"name":"other"},"1646651575136795":{"name":"other"},"2149025813059035":{"name":"other"}};
	
	const csun_heatmap_data = {
	"Distance":["0.08420282901","0.1248904661","0.1408858014","0.2766739632","0.3763839996","0.4811826802","0.02235075908","0.1707206847","0.4793893076","0.258395855","0.1309777051","0.2790765846","0.7348745878","0.1534166602","0.4429463897","0.1707206847","0.6532528753","0.4452309415","0.5164087315","0.6339384722","0.330950378","0.1946696714","0.5807557541","0.7026723085","0.62261302","0.5183311021","0.4479083192","0.4452309415","0.5900488018","0.5217322299","0.5052466467","0.1882488692","0.4548389881","0.375848008","0.3620054379","0.6339384722","0.4793893076","0.3189551411","0.3763839996","0.1365919533","0.3622956374","0.7348745878","0.7148297162","0.6077065603","0.5859424102","0.6058403183","0.5905908689","0.561175831","0.08420282901","0.4429463897","0.4372672969","0.1309777051","0.1707206847","0.02235075908","0.7233653243","0.763271133","0.7584147642","0.05443282416","0.7129449712","0.8093318556","0.7805531654","0.2994009154","0.6085844411","0.592766765","0.5393882439","0.02243716334","0.013538212","0.00001","0.07964216472","0.1148561736","0.2527454041","0.1239270041","0.2000286389","0.01725455943","0.00001","0.008540024732","0.04846068997","0.07010801064","0.2944605184","0.4326872522","0.5164087315","0.1769808373","0.4791667153","0.09971855117","0.1725214782","0.2497486745","0.2412256089","0.1580956383","0.1162733108","0.1300509278","0.1595598473","0.207247625","0.111749836","0.3362827159","0.3995017247","0.4445402107","0.4811826802","0.5458770551","0.6741145025","0.2381284359","0.2821725414","0.3558486535","0.4062566646","0.09591173168","0.5261137844","0.5432751952","0.5621377041","0.5805237479","0.6171747634","0.6532528753","0.09631691273","0.00001","0.04497656076","0.1351040151","0.1266423095","0.1783110679","0.2948529193","0.3759168886","0.396191441","0.1263208755","0.1640860564","0.05181767989","0.06682607254","0.1644286484","0.1534166602","0.2280477237","0.281801099","0.7836512626","0.7502891969","0.7105064531","0.6156061563","0.5327184345","0.4754005128","0.4523873356","0.2646113146","0.3576733355","0.2585414938","0.1408858014","0.1248904661","0.1557791925","0.1918865457","0.2086968686","0.2329411089","0.258395855","0.2766739632","0.2596149648","0.247203394","0.2311419093","0.217548823","0.275382724","0.4325262793","0.2790765846","0.3547873795","0.4983593888","0.5458770551","0.4523873356","0.1534166602","0.5261137844","0.330950378","0.1769808373","0.1266423095","0.1640860564","0.6077065603","0.5217322299","0.375848008","0.4325262793","0.5327184345","0.7348745878","0.00001","0.396191441","0.6058403183","0.2994009154","0.3189551411"],"Maximum voltage":["1.016758335","1.008174883","1.015208256","1.003345127","1.000157966","0.9931789927","1.021185453","1.009366766","0.9991460912","1.003457176","1.009957247","1.002726717","0.9911443541","1.017049508","0.9946418459","1.009366766","0.9999766254","0.9996581074","1.020922299","0.9980986741","1.018469584","1.020684319","0.9974389666","1.002466039","1.002466033","1.003114867","1.00355313","1.000071792","1.000071812","0.9994350724","0.9995722668","1.020684318","0.9999918145","1.000499895","1.000672492","1.002395575","1.003422711","1.004890354","1.004415003","1.020684315","1.004531606","0.9955648415","0.9957792689","0.9969255549","0.9973401516","0.9976647679","0.9978554898","0.9982234246","1.020684307","0.9990057217","0.9990411841","1.014025027","1.013445943","1.025037361","1.023360147","1.02336015","1.02336015","1.02086585","1.023360148","1.023360157","1.023360156","1.015763447","1.023360041","1.023360041","1.023360037","1.021954865","1.022933362","1.024421674","1.020161878","1.021954888","1.018947678","1.02195489","1.021954895","1.027181891","1.027961227","1.027961228","1.027666626","1.027535011","1.026171369","1.02533158","1.024823065","1.019410939","1.025331582","1.023458767","1.020619368","1.017611353","1.013601154","1.013601147","1.014115352","1.013067776","1.010825713","1.007207186","1.019862985","1.000993253","0.9992770197","0.9983362899","0.9975712285","0.9964907156","0.9964907311","1.00699592","1.006694632","1.006190728","1.005846025","1.019972754","1.005026611","1.004920032","1.004802894","1.004688721","1.004461142","1.004237141","1.016001848","1.025127771","1.025091388","1.019788831","1.025025304","1.025025307","1.015856422","1.014361347","1.013987579","1.023458768","1.023067079","1.027508568","1.027377451","1.026524949","1.019702897","1.025969439","1.025969442","1.023360152","1.023360151","1.023360147","1.023360095","1.023360036","1.023824899","1.024011568","1.018947678","1.024837963","1.025703216","1.019164089","1.014192903","1.012047627","1.009542506","1.00837717","1.008017199","1.007639318","1.007529425","1.00763495","1.007711729","1.00781109","1.007895184","1.006938213","1.004987854","1.00692297","1.003548027","0.9990093619","0.9920771043","1.014203477","1.009839519","0.9947695145","1.014500104","1.015459957","1.02117316","1.019131993","0.9925319943","0.9950795864","0.996165539","1.000753427","1.019430618","0.9911443541","1.032119646","1.009874228","0.9932858229","1.01168502","1.00260724"],"Minimum voltage":["1.016304145","1.006932941","1.014567894","1.001292975","0.9976387967","0.9898209949","1.021174494","1.007950545","0.9965051244","1.00141821","1.008612053","1.000600245","0.9876270772","1.016475811","0.9914600718","1.007950545","0.9974359774","0.9966186086","1.020538451","0.9953315003","1.017054203","1.019796089","0.9910449273","0.9970935668","0.9970935596","0.9978962704","0.9984384694","0.994132357","0.9941323806","0.9933447368","0.9935144463","1.019796089","0.9940334254","0.994662487","0.994876","0.9970063925","0.9982771127","1.000092841","0.999504703","1.019796085","0.9996489731","0.9887269616","0.9889921706","0.9904099156","0.9909227086","0.9913240719","0.9915599838","0.9920150962","1.019796075","0.9928144945","0.9928583607","1.011392947","1.010676197","1.02501513","1.022264828","1.022264831","1.022264831","1.020020848","1.022264828","1.022264839","1.022264838","1.012865214","1.022264701","1.022264701","1.022264695","1.021369106","1.022579741","1.024421078","1.019149291","1.021369134","1.017646088","1.021369136","1.021369143","1.026996443","1.027960873","1.027960873","1.027596137","1.027433184","1.025744824","1.024705045","1.024075425","1.018219607","1.024705047","1.02238885","1.018874963","1.015152255","1.010868307","1.010868299","1.011504748","1.010208952","1.007435579","1.002959387","1.018779241","0.9952728001","0.993150084","0.9919865645","0.9910403086","0.9897038948","0.9897039132","1.002698024","1.002325292","1.001701894","1.001275449","1.018915136","1.000261714","1.000129849","0.9999849196","0.9998436577","0.9995620835","0.9992849359","1.013838495","1.025127005","1.025082032","1.018687389","1.025000199","1.025000202","1.01298029","1.011129989","1.010667409","1.022388851","1.021903912","1.027400524","1.027238209","1.026182856","1.018580979","1.025495156","1.025495159","1.022264834","1.022264832","1.022264828","1.022264766","1.022264694","1.022840235","1.023071347","1.017646089","1.024094417","1.02516558","1.017913988","1.01176785","1.009114101","1.00601512","1.004573498","1.004128045","1.003660427","1.003524667","1.00365525","1.003750262","1.003873218","1.003977282","1.002793189","1.000379966","1.002774327","0.9986008305","0.9929872466","0.9885861905","1.013718148","1.009261521","0.9923102237","1.013774677","1.014849855","1.021160725","1.01853642","0.9891820857","0.9919495627","0.9931670994","0.9983894042","1.018868431","0.9876270772","1.03211946","1.008168469","0.9900266019","1.010197049","1.000151428"],"Name":["adc","ar","bb","bh","bk","bp","cr","cs","cy","ed","eh","jd","jr","ll","lo","mg","mh","mz","nc:uva","nh","node_1","node_10","node_100","node_102","node_103","node_104","node_105","node_106","node_107","node_108","node_109","node_11","node_110","node_112","node_113","node_114","node_116","node_118","node_119","node_12","node_120","node_121","node_122","node_123","node_124","node_126","node_127","node_128","node_13","node_131","node_132","node_134","node_135","node_136","node_137","node_138","node_139","node_14","node_140","node_141","node_142","node_143","node_145","node_146","node_147","node_15","node_16","node_17","node_18","node_19","node_2","node_20","node_21","node_22","node_23","node_24","node_25","node_26","node_27","node_28","node_29","node_3","node_30","node_31","node_32","node_33","node_34","node_35","node_36","node_37","node_38","node_39","node_4","node_40","node_41","node_42","node_43","node_44","node_45","node_46","node_47","node_48","node_49","node_5","node_50","node_51","node_52","node_53","node_54","node_55","node_57","node_58","node_59","node_6","node_60","node_61","node_62","node_63","node_64","node_65","node_66","node_67","node_68","node_69","node_7","node_70","node_71","node_73","node_74","node_75","node_76","node_77","node_78","node_79","node_8","node_80","node_81","node_82","node_83","node_84","node_85","node_86","node_87","node_88","node_89","node_90","node_91","node_92","node_93","node_94","node_95","node_97","node_98","node_99","ov","parking_lot_2","pl:e6","pl:g3","ppm","ps:b5","ps:g3","re","sc","sh","sn","sq","src","st","substation","suc","un","usu","vpac"],"X":["-118.5298329","-118.5297772","-118.5308011","-118.5311897","-118.5281781","-118.5285229","-118.5271615","-118.5278479","-118.5297088","-118.5310476","-118.5281542","-118.5289471","-118.5306727","-118.529511","-118.5282111","-118.5282922","-118.5241448","-118.5302977","-118.5236288","-118.5299093","-118.5309308","-118.5303836","-118.531647","-118.5316389","-118.5307699","-118.529638","-118.5288736","-118.5300671","-118.5316389","-118.5309898","-118.5309871","-118.5303139","-118.53044","-118.5291874","-118.5290372","-118.5306657","-118.5292334","-118.5274739","-118.5276509","-118.5303032","-118.527498","-118.5304294","-118.530428","-118.5315908","-118.5315921","-118.5319728","-118.5319782","-118.531659","-118.5297346","-118.5284876","-118.5284822","-118.5276373","-118.5276239","-118.5262292","-118.5262542","-118.5267826","-118.5267558","-118.5297775","-118.5262623","-118.5255354","-118.52553","-118.5270139","-118.5254806","-118.5253089","-118.5253116","-118.5297667","-118.5298633","-118.5299438","-118.5300511","-118.5287636","-118.5309362","-118.5287421","-118.527916","-118.5276102","-118.527621","-118.5277122","-118.5270953","-118.5271006","-118.5246652","-118.5246705","-118.5247135","-118.5309415","-118.5251748","-118.527492","-118.5274974","-118.5274974","-118.5274813","-118.5274867","-118.5274813","-118.5274826","-118.5274867","-118.5274846","-118.5302334","-118.5288848","-118.5288901","-118.528874","-118.5288794","-118.528874","-118.527482","-118.5271494","-118.527136","-118.5263393","-118.5257922","-118.5300618","-118.5244913","-118.5245181","-118.5245329","-118.5245691","-118.5245718","-118.5241802","-118.5272744","-118.52623","-118.5257419","-118.529697","-118.5257365","-118.5257204","-118.5270079","-118.5261281","-118.5261496","-118.5277803","-118.5267933","-118.5270598","-118.5270598","-118.5260003","-118.5294985","-118.5253097","-118.5247262","-118.5270585","-118.5266964","-118.5262646","-118.5252346","-118.5252426","-118.5252373","-118.5253419","-118.5310488","-118.5253231","-118.5253097","-118.5305429","-118.529761","-118.5300963","-118.5301848","-118.5303672","-118.5306273","-118.5309036","-118.5308097","-118.530791","-118.530689","-118.5305147","-118.5303672","-118.5297395","-118.5280337","-118.5293644","-118.5300886","-118.531647","-118.5292387","-118.5240722","-118.528505","-118.523985","-118.5314891","-118.5327371","-118.5250765","-118.5263218","-118.5311857","-118.5310566","-118.5292742","-118.5282755","-118.5249133","-118.530248","-118.52623","-118.5266271","-118.5321254","-118.5270819","-118.5281586"],"X1":["-13194680.65","-13194674.44","-13194788.42","-13194831.68","-13194496.43","-13194534.81","-13194383.26","-13194459.68","-13194666.83","-13194815.86","-13194493.77","-13194582.03","-13194774.12","-13194644.8","-13194500.1","-13194509.13","-13194047.45","-13194732.38","-13193990","-13194689.15","-13194802.86","-13194741.95","-13194882.59","-13194881.69","-13194784.95","-13194658.95","-13194573.85","-13194706.71","-13194881.69","-13194809.43","-13194809.13","-13194734.19","-13194748.22","-13194608.79","-13194592.07","-13194773.35","-13194613.91","-13194418.04","-13194437.74","-13194733","-13194420.72","-13194747.04","-13194746.89","-13194876.33","-13194876.48","-13194918.85","-13194919.46","-13194883.92","-13194669.7","-13194530.88","-13194530.28","-13194436.23","-13194434.74","-13194279.48","-13194282.26","-13194341.08","-13194338.1","-13194674.48","-13194283.16","-13194202.25","-13194201.65","-13194366.83","-13194196.15","-13194177.03","-13194177.33","-13194673.27","-13194684.03","-13194692.99","-13194704.93","-13194561.61","-13194803.46","-13194559.21","-13194467.25","-13194433.21","-13194434.41","-13194444.57","-13194375.89","-13194376.48","-13194105.38","-13194105.97","-13194110.75","-13194804.05","-13194162.1","-13194420.05","-13194420.66","-13194420.66","-13194418.86","-13194419.46","-13194418.86","-13194419.01","-13194419.46","-13194419.23","-13194725.23","-13194575.1","-13194575.69","-13194573.9","-13194574.5","-13194573.9","-13194418.94","-13194381.92","-13194380.42","-13194291.74","-13194230.83","-13194706.12","-13194086.02","-13194089","-13194090.65","-13194094.68","-13194094.98","-13194051.39","-13194395.83","-13194279.57","-13194225.23","-13194665.51","-13194224.63","-13194222.84","-13194366.16","-13194268.23","-13194270.62","-13194452.15","-13194342.28","-13194371.94","-13194371.94","-13194254","-13194643.42","-13194177.12","-13194112.17","-13194371.8","-13194331.49","-13194283.42","-13194168.76","-13194169.65","-13194169.06","-13194180.71","-13194816","-13194178.61","-13194177.12","-13194759.68","-13194672.64","-13194709.96","-13194719.82","-13194740.12","-13194769.07","-13194799.83","-13194789.38","-13194787.3","-13194775.94","-13194756.54","-13194740.12","-13194670.24","-13194480.36","-13194628.49","-13194709.11","-13194882.59","-13194614.5","-13194039.36","-13194532.82","-13194029.66","-13194865.01","-13195003.94","-13194151.16","-13194289.79","-13194831.24","-13194816.86","-13194618.45","-13194507.27","-13194132.99","-13194726.85","-13194279.57","-13194323.78","-13194935.84","-13194374.41","-13194494.26"],"Y":["34.24301896","34.24138462","34.24207061","34.24058511","34.23743401","34.2392903","34.23846066","34.23913034","34.23639589","34.2412856","34.23884506","34.24132167","34.23907307","34.24262767","34.23849163","34.23942167","34.23666751","34.23786437","34.2524239","34.23639566","34.2441287","34.2433128","34.2389905","34.2368063","34.2368041","34.2368108","34.236813","34.2378774","34.2378596","34.2381124","34.2379638","34.2433128","34.2379572","34.2376578","34.2376612","34.2367154","34.2365292","34.2368197","34.2372077","34.2428472","34.2372099","34.2389371","34.2391178","34.2391189","34.2389227","34.2401687","34.2403061","34.2402995","34.242856","34.2383873","34.2384383","34.2386911","34.2391058","34.2383696","34.2390339","34.2392024","34.2391647","34.24259","34.2391714","34.2394707","34.2392113","34.2402559","34.2402224","34.2402224","34.2397412","34.2423017","34.2423017","34.2424037","34.2425855","34.2422884","34.2434237","34.2423682","34.2423682","34.2423771","34.2425323","34.242519","34.242519","34.2427141","34.2427097","34.2439558","34.2447097","34.2427407","34.2439425","34.2416402","34.2409839","34.2402877","34.2397732","34.2390238","34.2386468","34.2385226","34.2382566","34.2378267","34.2427407","34.2378555","34.2384254","34.2388312","34.2391615","34.2397447","34.2397425","34.2378267","34.2374298","34.2373721","34.2373655","34.2427319","34.2373788","34.2372257","34.2370561","34.2368931","34.2365627","34.2365605","34.2386087","34.238571","34.238571","34.2429137","34.2378348","34.2373692","34.2402961","34.2403094","34.2404913","34.2416265","34.2416443","34.242502","34.2426373","34.2426384","34.2429226","34.2426373","34.242635","34.2391406","34.239145","34.2391495","34.2391628","34.23991","34.2404267","34.2406151","34.243641","34.2414688","34.2423624","34.242214","34.2413781","34.2413781","34.241061","34.2410566","34.2410899","34.2410921","34.240744","34.240897","34.2409701","34.2409735","34.2409768","34.2409856","34.2409856","34.2410194","34.2397444","34.2397333","34.24003388","34.24086789","34.24348002","34.23826328","34.24449751","34.24222108","34.23812174","34.24210832","34.23921833","34.23838071","34.23782658","34.24072996","34.24010979","34.23909685","34.238571","34.2409512","34.24005417","34.24015613","34.23624177"],"Y1":["4061480.4","4061260.319","4061352.694","4061152.659","4060728.345","4060978.302","4060866.588","4060956.763","4060588.56","4061246.984","4060918.349","4061251.842","4060949.051","4061427.709","4060870.758","4060995.992","4060625.133","4060786.293","4062746.96","4060588.529","4061629.841","4061519.97","4060937.933","4060643.822","4060643.526","4060644.428","4060644.724","4060788.049","4060785.652","4060819.692","4060799.683","4061519.97","4060798.794","4060758.479","4060758.936","4060631.582","4060606.51","4060645.626","4060697.871","4061457.271","4060698.168","4060930.742","4060955.074","4060955.223","4060928.803","4061096.585","4061115.087","4061114.198","4061458.456","4060856.709","4060863.576","4060897.617","4060953.459","4060854.325","4060943.777","4060966.466","4060961.39","4061422.636","4060962.292","4061002.595","4060967.665","4061108.327","4061103.816","4061103.816","4061039.019","4061383.813","4061383.813","4061397.549","4061422.03","4061382.022","4061534.904","4061392.768","4061392.768","4061393.967","4061414.866","4061413.075","4061413.075","4061439.347","4061438.755","4061606.558","4061708.081","4061442.929","4061604.767","4061294.735","4061206.358","4061112.609","4061043.328","4060942.417","4060891.652","4060874.928","4060839.109","4060781.222","4061442.929","4060785.1","4060861.839","4060916.482","4060960.959","4061039.49","4061039.194","4060781.222","4060727.778","4060720.008","4060719.12","4061441.744","4060720.91","4060700.295","4060677.458","4060655.51","4060611.021","4060610.724","4060886.521","4060881.445","4060881.445","4061466.226","4060782.312","4060719.618","4061113.74","4061115.531","4061140.026","4061292.89","4061295.287","4061410.786","4061429.005","4061429.154","4061467.424","4061429.005","4061428.696","4060958.145","4060958.737","4060959.343","4060961.134","4061061.749","4061131.327","4061156.696","4061564.166","4061271.655","4061391.987","4061372.003","4061259.441","4061259.441","4061216.741","4061216.148","4061220.632","4061220.928","4061174.054","4061194.657","4061204.5","4061204.958","4061205.402","4061206.587","4061206.587","4061211.139","4061039.45","4061037.955","4061078.431","4061190.736","4061542.488","4060840.009","4061679.507","4061372.956","4060820.95","4061357.772","4060968.611","4060855.822","4060781.206","4061172.163","4061088.652","4060952.253","4060881.445","4061201.955","4061081.163","4061094.892","4060567.807"],"index":["141","591","583","633","831","351","963","947","807","625","933","697","849","103","915","945","433","741","247","795","48","120","709","714","715","721","727","327","739","750","751","121","763","774","775","792","804","733","828","127","829","846","847","865","871","888","889","901","133","912","913","930","942","960","972","978","979","139","985","996","997","1008","1020","1021","1027","151","157","11","87","159","49","193","199","204","7","25","27","217","223","229","235","61","237","207","253","265","276","277","283","289","301","307","67","313","325","337","343","349","361","315","373","379","385","79","391","397","409","415","421","427","291","9","43","85","445","451","271","463","469","480","255","29","493","499","97","505","511","516","517","523","529","535","541","553","114","559","571","183","161","589","601","607","613","619","630","631","643","649","655","663","679","681","665","703","363","561","105","399","51","69","453","487","873","753","777","691","543","851","1","475","891","1011","819"],"kVBase":["0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","2.40177712","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","0.2771281292","19.91858429","0.2771281292","0.2771281292","0.2771281292","0.2771281292"],"pv_penetration":["1100","800","2900","1100","1500","700","800","1100","800","2600","1100","800","1800","1000","1100","1100","1100","2000","1100","1100","4640","5240","4570","3500","3920","4580","5190","5580","4330","4900","5030","5240","5490","5700","5700","3860","4890","6010","5560","5210","5560","3800","3880","4420","4540","4380","4470","4650","5420","5490","5490","5410","5660","5330","1920","1820","1830","6440","1940","1720","1780","5570","2260","2320","2530","9080","9080","11890","6230","5210","5490","5210","5250","6860","10150","5190","5440","5450","3970","2880","2490","5490","2620","6890","6690","6210","5230","5650","8570","7930","7940","7950","5460","7000","6240","5770","5440","4950","4080","5450","5470","5510","5410","5630","4340","4230","4100","3990","3790","3610","8570","11530","5220","5390","5260","5250","5630","4710","4540","5220","5470","5540","5540","5590","5400","5030","4170","1780","1850","1950","2230","2560","2800","2910","5260","3510","4550","5820","7920","7710","7720","7720","5760","5770","5450","5440","5440","5430","7190","5840","5180","5370","6380","5110","2900","100","100","100","1100","200","200","1100","1500","1500","2200","2200","1500","100","34460","3300","2200","3600","700"],"attached":["no","no","no","yes","yes","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","yes","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","yes","no","no","no","yes","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","no","yes","no","no","no","no","no","no","yes","no","yes","no","no","no","no","no","no","no","yes","no"]};


  
	map.on('style.load', () => {
		// Insert the layer beneath any symbol layer.
		console.log("hi");
		const layers = map.getStyle().layers;
		const labelLayerId = layers.find(
		(layer) => layer.type === 'symbol' && layer.layout['text-field']
		).id;
		
		/*map.addSource('buildings', {
			type: 'vector',
			url: 'buildings.json'
		});*/
			map.addSource('map-outline', {
				'type': 'geojson', 
				'data': {
					'type': 'Feature', 
					'geometry': {
						'type': 'Polygon',
						'coordinates': [ 
						[
							[-118.53381610203138, 34.2445743763931],
							[-118.52924593247594, 34.2445743763931],
							[-118.52924593247594, 34.242733183275874],
							[-118.52469574477936, 34.242733183275874],
							[-118.52469574477936, 34.24362380493486],
							[-118.5234156387037, 34.24362380493486],
							[-118.5234156387037, 34.2425487108279],
							
							[-118.52462166754893, 34.2425487108279],
							[-118.52462166754893, 34.23735212290945],
							[-118.52734520609741, 34.23735212290945],
							[-118.52734520609741, 34.23550102690266],
							[-118.53381610203138, 34.23550102690266],
							[-118.53381610203138, 34.2445743763931]
						]
						]
					}
			}
			});
	
	
	
    map.addSource('custom-circles', {
      'type': 'geojson',
      'data': {
        'type': 'FeatureCollection',
        'features': 
          Array(1038).fill(0).map((_, i) => ({
            'type': 'Feature',
            'geometry': {
              'type': 'Point',
              'coordinates': [csun_heatmap_data.X[i], csun_heatmap_data.Y[i]]
            },
            'properties': {
			  'attached': csun_heatmap_data.attached[i],
              'description':
                '<p><b>Node Name: </b>' + csun_heatmap_data.Name[i] + '<br />' +
                   '<b>Max PV Capacity [kVA]: </b>' + csun_heatmap_data['pv_penetration'][i] + '</p>'
            }
          }))
      }
    });
	
	map.addLayer(
		{
		'id': 'add-3d-buildings',
		'source': 'composite',
		'source-layer': 'building',
		'filter': ['all',
        ['==', ['get', 'extrude'], 'true'],
        ['in', ['to-string', ['id']], ["literal", Object.keys(buildingInfo).filter(id => buildingInfo[id].name !== 'other')]],
		],
		'type': 'fill-extrusion',
		'minzoom': 15,
		'paint': {
		
		'fill-extrusion-color': building_color,
		 
		// Use an 'interpolate' expression to
		// add a smooth transition effect to
		// the buildings as the user zooms in.
		'fill-extrusion-height': [
		'interpolate',
		['linear'],
		['zoom'],
		15,
		0,
		15.05,
		['get', 'height']
		],
		'fill-extrusion-base': [
		'interpolate',
		['linear'],
		['zoom'],
		15,
		0,
		15.05,
		['get', 'min_height']
		],
		'fill-extrusion-opacity': 0.6
		}
		},
		labelLayerId
		);
		
		map.addLayer(
		{
			'id': 'identify-buildings',
			'source': 'composite',
			'source-layer': 'building',
			'filter': ['==', 'extrude', 'true'],
			'type': 'fill',
			'minzoom': 15,
			'paint': {
			
			'fill-color': '#000'
			 
			}
		},
		labelLayerId
		);
	
	map.addLayer(
    {
      'id': 'custom-circles',
      'paint': {'circle-color': ['case', ['==', ['get', 'attached'], 'yes'], 'purple', '#0091FF']},
      'source': 'custom-circles',
      'type': 'circle'
    },
    labelLayerId
    );

    map.on('click', 'custom-circles', (e) => {
        // Copy coordinates array.
        const coordinates = e.features[0].geometry.coordinates.slice();
        const description = e.features[0].properties.description;

        // Ensure that if the map is zoomed out such that multiple
        // copies of the feature are visible, the popup appears
        // over the copy being pointed to.
        while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
            coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
        }

        new mapboxgl.Popup()
            .setLngLat(coordinates)
            .setHTML(description)
            .addTo(map);
    });


		// The 'building' layer in the Mapbox Streets
		// vector tileset contains building height data
		// from OpenStreetMap.
		
		
		map.addLayer(
		{
			'id': 'outline',
			'type': 'line', 
			'source': 'map-outline', 
			'layout': {},
			'paint': {
				'line-color': '#000000',
				'line-width': 3
			}
		}
		);
	  /*
		const ii = setInterval(() => {
			const features = map.queryRenderedFeatures({layers: ['identify-buildings']});
			if (features.length > 0) clearInterval(ii);
				console.log(features);
		}, 500);
		/*setTimeout(()=>{
			
			
			for (const feature of features){
				console.log(feature);
		};
		}, 5000);*/
		
			showBuildingInfo();
	});
	
	map.on('mousemove', 'identify-buildings', (event) => {
	  map.getCanvas().style.cursor = 'pointer';
	  const id = event.features[0].id;
	  
	  let name = undefined;
	  if(buildingInfo[event.features[0].id]) {
		name = buildingInfo[event.features[0].id].name;
	  };
	  
	  // console.log(buildingInfo[event.features[0].id]);
	  
	  
	  // console.log(event.features[0].id)

	  // Check whether features exist
	  if (event.features.length === 0) return;
	  // Display the id in the sidebar
	  idDisplay.textContent = id;
	  nameDisplay.textContent = name;
	  
	  /* map.setPaintProperty('building', 'fill-color', ['match', id, 6427398, '#FF0000', '#00FF00']); */
	  map.setPaintProperty('building', 'fill-color', 'transparent');
	  // If ID for the hovered feature is not null,
	  // use removeFeatureState to reset to the default behavior
	});
  
	  let selected = null;
	  const showBuildingInfo = () =>
		map.setPaintProperty('identify-buildings', 'fill-color',
		  ['case',
			['==', ['id'], selected], 'purple',
			['in', ['to-string', ['id']], ["literal", Object.keys(buildingInfo).filter(id => buildingInfo[id].name === 'other')]], '#D8CACA',
			['in', ['to-string', ['id']], ["literal", Object.keys(buildingInfo)]], building_color,
			'transparent'
		  ]);
	  
	
	
  /*map.on('click', 'identify-buildings', e => {
    const id = e?.features?.[0]?.id;
    if (!id) return;

    // if it's new, select it
    if (id !== selected) {
      selected = id;
      showBuildingInfo();
      return;
    }

    // if it's already selected, ask xela for the name
    const name = prompt("Name for " + id + "?", buildingInfo[id]?.name ?? "");

    if (name === null) {
      // cancel or esc pushed, don't save
      return;
    } else if (name !== "") {
      // name the thing the name
      buildingInfo[id] ??= {};
      buildingInfo[id].name = name;
    } else {
      // empty string, delete entry
      delete buildingInfo[id];
    }
    nameDisplay.textContent = name;
    console.log("buildingInfo = " + JSON.stringify(buildingInfo));
    selected = null;
    showBuildingInfo();
  });*/

  </script>

</body>
</html>